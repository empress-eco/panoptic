{% extends "templates/panoptic_base.html" %}

{% block content %}
<section class="container border-b border-r border-l flex">
	<article class="text-white border-r w-full md:w-2/3 p-6 md:p-12">
		<div class="prose prose-md">
			<h1>{{ doc.title }}</h1>
			{{ frappe.utils.md_to_html(doc.content) }}
		</div>
	</article>
	<div class="p-12 hidden md:block w-full md:w-1/3 text-teal-blue-300">
		{% if description %}
		<div class="mb-12 pr-12">
			{{ description }}
			<div class="mt-4">
				Published on <b>{{ frappe.format_date(published_date) }}</b>
			</div>
			<div class="flex mt-4 items-center">
				{% set member = frappe.get_doc("Team Member", published_by) %}
				<img src="{{ member.avatar }}" class="h-10 w-10 mr-2 rounded-full border-2"
					alt="{{ member.full_name }}">
				<div>
					<h4 class="text-lg text-orange-500">{{ member.full_name }}</h4>
					{% if member.role %}
					<p>{{ member.role[:80] }}</p>
					{% endif %}
				</div>
			</div>
		</div>
		{% endif %}

		<div class="mb-12">
			<h3>Table of Contents</h3>
			<div class="mt-3 toc-html">
				{{ frappe.utils.md_to_html(doc.content).toc_html }}
			</div>
		</div>

		{% if frt|length %}
		<div class=" mb-12">
			<h3>FRTs Mentioned</h3>
			<ul class="mt-3">
				{% for link_frt in frt %}
				{% set frt_doc = frappe.get_doc("FRT", link_frt.frt) %}
				<li>
					<a class="hover:underline text-orange-500" href="/{{ frt_doc.route }}">{{ frt_doc.name }},
						{{ frt_doc.authority }}</a>
				</li>
				{% endfor %}
			</ul>
		</div>
		{% endif %}
		{% if other_links|length %}
		<div class="mb-12">
			<h3>Other Links</h3>
			<ul class="mt-3">
				{% for link in other_links %}
				<li>
					<a class="hover:underline text-orange-500" href="/{{ link.link }}">{{ link.title }}</a>
				</li>
				{% endfor %}
			</ul>
		</div>
		{% endif %}
	</div>
</section>
{% endblock %}