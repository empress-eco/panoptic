{% extends "templates/panoptic_base.html" %}

{% block script %}
<script>
	window.state_wise_frt = {{ state_wise_frt }};
	window.state_routes = {{ state_routes }};
	window.current_state = "{{ state_id or '' }}";
</script>
<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
<script src="https://cdn.amcharts.com/lib/4/maps.js"></script>
<script src="https://cdn.amcharts.com/lib/4/geodata/data/countries2.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/material.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
<script src="/assets/panoptic/js/india_map.js"></script>
{% endblock %}

{% block content %}
<section class="container border-b">
	{{ web_block(
		"Title Section",
		values={
			"title": "FRT Systems in <span class='text-orange-500'>{0}</span>".format(doc.state_name),
			"button_label": "View States List",
			"button_id": "view-states-list",
		},
		add_container=0,
		add_top_padding=0,
		add_bottom_padding=0,
	) }}
	<div class="flex flex-wrap">
		<div class="w-full md:w-2/3 md:border-r border-l">
			<div id="chartdiv" class="h-full block"></div>
			<!-- <img style="max-height: 600px;" src="/assets/panoptic/images/demo-map.svg"> -->
		</div>
		<div class="w-full md:w-1/3 border-r flex flex-col justify-between">
			{{ web_block(
				"Stats Column",
				values={
					"stats": {
						"FRT Systems Installed": total_frt,
						"In Active Utilization": total_frt_in_use,
						"Financial Outlay": frappe.utils.fmt_money(total_cost, 0, "INR")
					}
				},
				add_container=0,
				add_top_padding=0,
				add_bottom_padding=0,
			) }}
			<div class="px-8 py-4 bg-panoptic-blue-500">
				<h2 class="text-white">
					Facial Recognition Systems Tracker
				</h2>
				<p class="mt-3">
					Browse through our breathing database of all the FRT systems installed in India by different
					authorities.
				</p>
				<div class="flex my-4 pr-12 flex items-center">
					Hover over the states to dig deeper.
				</div>
			</div>
		</div>
	</div>
</section>
<section class="container bg-teal-blue-500 border-l border-r border-b flex flex-wrap">
	<div class="bg-panoptic-blue-500 border-b w-full font-bold px-8 py-5">
		List of FRTS installed in the state:
	</div>
	{% for frt in frts %}
	<a href="{{ frt.route }}" class="w-full md:w-1/3 lg:w-1/4 p-8 border-r border-b hover:bg-teal-blue-600">
		<h2>{{ frt.authority }}</h2>
		<div class="mt-3 mb-8">
			<p>{{ frt.technology_provider }}</p>
			<p>{{ frt.district_name }}</p>
			<p>ID: {{ frt.name }}</p>
		</div>
	</a>
	{% endfor %}
</section>
{% endblock %}