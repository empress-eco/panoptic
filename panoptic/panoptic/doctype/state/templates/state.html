{% extends "templates/panoptic_base.html" %}

{% block script %}
<script>
	window.state_wise_frt = {{ state_wise_frt }};
	window.state_routes = {{ state_routes }};
	window.current_state = "{{ state_id or '' }}";
</script>
<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
<script src="https://cdn.amcharts.com/lib/4/maps.js"></script>
<script src="https://cdn.amcharts.com/lib/4/geodata/data/countries2.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/material.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
<script src="/assets/panoptic/js/india_map.js"></script>
{% endblock %}

{% block content %}
<section class="container border-b border-collapse">
	<div class="flex flex-wrap justify-between border-l border-r border-b border-collapse">
		<h1 class="p-5">Facial Recognition Systems in <span class="text-orange-500">{{ doc.state_name }}</span></h1>
		<button
			class="w-full md:w-1/3 block h-100 px-8 items-center text-orange-500 font-bold hover:bg-teal-blue-600 border-l">
			View States List
		</button>
	</div>
	<div class="flex flex-wrap">
		<div class="w-full md:w-2/3 md:border-r border-l">
			<div id="chartdiv" class="h-full block"></div>
			<!-- <img style="max-height: 600px;" src="/assets/panoptic/images/demo-map.svg"> -->
		</div>
		<div class="w-full md:w-1/3 border-r flex flex-col justify-between">
			<div>
				<div class="px-8 py-4 border-b">
					<p class="text-5xl font-bold text-orange-500">{{ total_frt }}</p>
					<p>FRT Systems Installed</p>
				</div>
				<div class="px-8 py-4 border-b">
					<p class="text-5xl font-bold text-orange-500">{{ total_frt_in_use }}</p>
					<p>In Active Utilization</p>
				</div>
				<div class="px-8 py-4">
					<p class="text-5xl font-bold text-orange-500">{{ frappe.utils.fmt_money(total_cost, 0, "INR") }}</p>
					<p>Financial Outlay</p>
				</div>
			</div>
			<div class="px-8 py-4 bg-panoptic-blue-500 border-t">
				<h2 class="text-white">
					Facial Recognition Systems Tracker
				</h2>
				<p class="mt-3">
					Browse through our breathing database of all the FRT systems installed in India by different
					authorities.
				</p>
				<div class="flex my-4 pr-12 flex items-center">
					Hover over the states to dig deeper.
				</div>
			</div>
		</div>
	</div>
</section>
<section class="container bg-teal-blue-500 border-l border-r border-b flex flex-wrap">
	<div class="bg-panoptic-blue-500 border-b w-full font-bold px-8 py-5">
		List of FRTS installed in the state:
	</div>
	{% for frt in frts %}
	<a href="{{ frt.route }}" class="w-full md:w-1/3 lg:w-1/4 p-8 border-r border-b hover:bg-teal-blue-600">
		<h2>{{ frt.authority }}</h2>
		<div class="mt-3 mb-8">
			<p>{{ frt.technology_provider }}</p>
			<p>{{ frt.district_name }}</p>
			<p>ID: {{ frt.name }}</p>
		</div>
	</a>
	{% endfor %}
</section>
{% endblock %}